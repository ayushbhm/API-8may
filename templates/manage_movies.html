{% extends 'navbar.html' %}

{% block content %}

<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-left: 20px;">
    {% for movie in movie_details %}
    

    {% for each_person in movie.persons %}
    
    {%endfor%}
    <div style="width: 30%; border: 1px solid #ccc; padding: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); margin-bottom: 20px;">
        <form method="POST" action="{{url_for('manage_movies.update_movie_request')}}">

            <p style="font-size: 24px; font-weight: bold; margin-bottom: 10px;">Update {{ movie.movie_name }}</p>

            <input type="hidden" name="movie_id" value="{{ movie.movie_id }}"> 
            <input type="hidden" name="old_person_id" value="{{ old_person_id }}">


            <p style="margin-bottom: 8px;"><strong>Name:</strong>
            <input type="text" name="name" value="{{ movie.movie_name }}" style="width: 100%; padding: 6px;"></p>
            
            <p style="margin-bottom: 8px;"><strong>Year:</strong> <input type="text" name="year" value="{{ movie.year }}" style="width: 100%; padding: 6px;"></p>

            <p style="margin-bottom: 8px;"><strong>IMDB Rating:</strong> <input type="text" name="imdb_rating" value="{{ movie.imdb_rating }}" style="width: 100%; padding: 6px;"></p>
            
            
            <p style="margin-bottom: 8px;"><strong>Genres:</strong>
                <select name="genre" style="width: 100%; padding: 6px;">
                    {% for genre in genres %}
                        <option value="{{ genre }}">{{ genre }}</option>
                    {% endfor %}
                </select>
            </p>
            
           
            <p style="margin-bottom: 8px;"><strong>Persons:</strong>
               
<div>
    
    {% for each_person in movie.persons %}
    <input type="hidden" name="person_id[]" value="{{ each_person.person_id }}">
    <strong>{{ each_person.person_name }}</strong> -
    <select name="role[]" style="width: 100%; padding: 6px;">
        {% for role in roles %}
            <option value="{{ role }}">Role: {{ role }}</option>
        {% endfor %}
    </select><br><br>
{% endfor %}



    
</div>
         

            </p>
           
             

            
            <p style="margin-bottom: 8px;">
               
            </p>
            
            <button type="submit" style="background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Update</button>
        </form>
    </div>


    
    {% endfor %}
</div>


{% endblock %}
